<div class="wrapper lter b-b bg-white">
  <div class="subview3_title">水环境分析预测BI</div>
</div>
<div class="col-md-12 " >
    <!--test-->
    <div class="wrapper ">
      <div class="details-content">
        <div class="panel panel-primary" style="margin-top: 10px;">
          <div class="panel-heading">
          水质量分析
          <span class="glyphicon glyphicon-question-sign pull-right"></span>
          </div>
          <div class="row" >
            <div class="col-md-7">
                <div class="panel panel-primary"style="height:700px;">
                    <div class="panel-body" style="padding:0;width:100%;height:100%;">
                      <div id="map_wMap"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-5">
              <div class="panel panel-primary" style="width:100%;height: 700px;">
                <div class="panel-body">
                    <h4>水质量分析</h4>
                    <div>
                      <h5 style="padding-top: 0px">(更新时间:&nbsp 2015年12月11日6时</h5>
                    </div>
                    <div>
                      <button class="btn btn-warning" ng-click="btn_waterEnvironmentAnalysisAllList()">
                        &nbsp点击列出超标水质监测点
                        <span class="badge"></span>
                      </button>
                    </div>

                    <hr>

                    <div  style="font-size:16px">
                      <div class="panel panel-primary">
                        <div class="panel-body" id="source_analysis">
                          <h4>附近污染源</h4>
                          <hr>
                          <div>
                            <table class="table table-hover table-responsive"  style="font-size:14px;margin-bottom:0px">
                              <tr>
                                <th style="width:30%">企业</th>
                                <th style="width:25%">
                                  排放量
                                  <br/>
                                  (吨)
                                </th>
                                <th style="width:15%">
                                  COD
                                  <br/>
                                  (mg/L)
                                </th>
                                <th style="width:15%">
                                  氨氮
                                  <br/>
                                  (mg/L)
                                </th>
                                <th style="width:15%">
                                  总磷
                                  <br/>
                                  (mg/L)
                                </th>
                              </tr>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                </div>
              </div>

              <div>
                <button type="button" class="btn btn-block btn-success" ng-click="btn_waterEnvironmentAllList()" ng-show="tableStatus.allWaterQualityFailArrNav" >列出所有监测点</button>
              </div>
            </div> 
        </div>
        </div>
      </div>
    </div>
    
    <div class="row" style="margin-top: 20px;">
        <div class="col-md-12" style="padding:15px 30px 15px 30px">
            <div class="panel panel-primary" style="margin-top: 20px;">
                <div class="panel-heading">
                    污水排放总量变化
                    <span class="glyphicon glyphicon-question-sign pull-right"></span>
                </div>
                <div class="panel-body ">
                    <div class="row">
                        <div class="col-md-8 chart-panel">
                            <div id="discharge" style="width:98%;height: 400px;margin-left:24px" ></div>
                        </div>
                        <div class="col-md-4">
                            <p class="fill-margin"></p>
                            <div class="ioc-panel-desc">
                                <p class="ioc-panel-desc-title">
                                    <img src="/images/common/data_details.png"/>
                                </p>
                                <h4>预测结果解读</h4>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    


    <div class="wrapper ">
      <div class="details-content">
        <div class="panel panel-primary" style="margin-top: 10px;">
          <div class="panel-heading">
          水环境质量预测分析
          <span class="glyphicon glyphicon-question-sign pull-right"></span>
          </div>
          <div class="panel-body">

            <div class="row">
              <button ng-repeat="bttn in buttonMap2" class="btn btn-primary col-md-2" ng-model="predictionModal" style="margin-left: 25px;" btn-radio="bttn.radio" ng-click="btn_click(bttn)">{{bttn.label}}</button>
              <!--第一个-->
              <div ng-show="tableStatus.allWater1">
                <div class="col-md-8 chart-panel">
                  <div class="row">
                    <div class="col-md-3">
                      <highchart  config="chart11"></highchart>
                    </div>

                    <div class="col-md-3">
                      <highchart style="height:400px;" config="chart12"></highchart>
                    </div>

                    <div class="col-md-3">
                      <highchart style="height:400px;" config="chart13"></highchart>
                    </div>

                    <div class="col-md-3">
                      <highchart style="height:400px;" config="chart14"></highchart>
                    </div>

                    <div class="col-md-12">
                      <table class="table table-bordered">
                        <tr>
                          <th></th>
                          <th colspan="2">溶解氧(mg/L)</th>
                          <th colspan="2">高锰酸钾(mg/L)</th>
                          <th colspan="2">氨氮(mg/L)</th>
                          <th colspan="2">总磷(mg/L)</th>
                        </tr>
                        <tr>
                          <td></td>
                          <td>原值</td>
                          <td>预测未来值</td>
                          <td>原值</td>
                          <td>预测未来值</td>
                          <td>原值</td>
                          <td>预测未来值</td>
                          <td>原值</td>
                          <td>预测未来值</td>
                        </tr>

                        <tr>
                          <td>值</td>
                          <td>5</td>
                          <td>
                            {{(selectedRange*0.03*0.05+1+selectedRange1*0.003+selectedRange2*0.002).toFixed(2)}}
                          </td>
                          <td>12</td>
                          <td>{{(selectedRange*0.03*0.5+8).toFixed(2)}}</td>
                          <td>2.5</td>
                          <td>
                            {{(selectedRange*0.03*0.05+0.6+selectedRange1*0.005+selectedRange2*0.002).toFixed(2)}}
                          </td>
                          <td>0.4</td>
                          <td>
                            {{(selectedRange*0.0003*0.05+0.12+selectedRange1*0.0005+selectedRange2*0.0002).toFixed(2)}}
                          </td>
                        </tr>
                        <tr>
                          <td>状态</td>
                          <td>
                            <span ng-class="getLabelCss(getStatusDesc(waterQualityAnalysisMarker.index_o2,waterQualityO2Scan.scan,'溶解氧').status)">
                              {{getChineseStatusView(getStatusDesc(waterQualityAnalysisMarker.index_o2,waterQualityO2Scan.scan,'溶解氧').status)}}
                            </span>
                          </td>
                          <td>
                            <span ng-class="getLabelCss(getStatusDesc(predict_waterquality.index_o2,waterQualityO2Scan.scan,'溶解氧').status)">
                              {{getChineseStatusView(getStatusDesc(predict_waterquality.index_o2,waterQualityO2Scan.scan,'溶解氧').status)}}
                            </span>
                          </td>
                          <td>
                            <span ng-class="getLabelCss(getStatusAsc(waterQualityAnalysisMarker.index_kmno4,waterQualityKmno4Scan.scan,'高锰酸钾').status)">
                              {{getChineseStatusView(getStatusAsc(waterQualityAnalysisMarker.index_kmno4,waterQualityKmno4Scan.scan,'高锰酸钾').status)}}
                            </span>
                          </td>
                          <td>
                            <span ng-class="getLabelCss(getStatusAsc(predict_waterquality.index_kmno4,waterQualityKmno4Scan.scan,'高锰酸钾').status)">
                              {{getChineseStatusView(getStatusAsc(predict_waterquality.index_kmno4,waterQualityKmno4Scan.scan,'高锰酸钾').status)}}
                            </span>
                          </td>
                          <td>
                            <span ng-class="getLabelCss(getStatusAsc(waterQualityAnalysisMarker.index_nh4n,waterQualityNh4nScan.scan,'氨氮').status)">
                              {{getChineseStatusView(getStatusAsc(waterQualityAnalysisMarker.index_nh4n,waterQualityNh4nScan.scan,'氨氮').status)}}
                            </span>
                          </td>
                          <td>
                            <span ng-class="getLabelCss(getStatusAsc(predict_waterquality.index_nh4n,waterQualityNh4nScan.scan,'氨氮').status)">
                              {{getChineseStatusView(getStatusAsc(predict_waterquality.index_nh4n,waterQualityNh4nScan.scan,'氨氮').status)}}
                            </span>
                          </td>
                          <td>
                            <span ng-class="getLabelCss(getStatusAsc(waterQualityAnalysisMarker.index_p,waterQualityPScan.scan,'总磷').status)">
                              {{getChineseStatusView(getStatusAsc(waterQualityAnalysisMarker.index_p,waterQualityPScan.scan,'总磷').status)}}
                            </span>
                          </td>
                          <td>
                            <span ng-class="getLabelCss(getStatusAsc(predict_waterquality.index_p,waterQualityPScan.scan,'总磷').status)">
                              {{getChineseStatusView(getStatusAsc(predict_waterquality.index_p,waterQualityPScan.scan,'总磷').status)}}
                            </span>
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>

                <div class="col-md-4 desc-content">
                  <div class="ioc-panel-desc">
                    <p class="ioc-panel-desc-title">
                      <img src="/images/common/data_details.png"/>
                    </p>
                  </div>
                  <div >
                    <h4>太仓市协鑫码头水质主要受玖龙纸业和港城组团污水处理厂两个工业废水排放场影响</h4>
                  </div>
                  <p class="fill-margin"></p>
                  <div class="ioc-panel-desc">
                    <p class="ioc-panel-desc-title">
                      <img src="/images/common/ioc-index-mean.png"/>
                    </p>
                    <p class="ioc-panel-desc-body">
                      可手动调节 <strong>工厂废水排放量</strong>
                      观察对应各个水质污染物污染情况
                    </p>
                  </div>
                  <div class="row">
                    <div class="col-md-5">
                      <p >玖龙纸业</p>
                    </div>
                    <div class="col-md-7">
                      <div class="progress-box">
                        <div class="percentage-cur">
                          <span class="num">{{selectedRange}}.00%</span>
                        </div>
                        <div class="progress-bar progress-bar-slider">
                          <input class="progress-slider" type="range" min="0" max="100" ng-model="selectedRange" >
                          <div class="inner" ng-style="{ width: (selectedRange) + '%'   }" ></div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-md-5">
                      <p class="handler-title">江城有限公司</p>
                    </div>
                    <div class="col-md-7">
                      <div class="progress-box">
                        <div class="percentage-cur">
                          <span class="num">{{ selectedRange1}}.00%</span>
                        </div>
                        <div class="progress-bar progress-bar-slider">
                          <input class="progress-slider" type="range" min="0" max="100" ng-model="selectedRange1">
                          <div class="inner" ng-style="{ width: (selectedRange1) + '%'   }" ></div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-md-5">
                      <p class="handler-title">岳王污水处理厂</p>
                    </div>
                    <div class="col-md-7">
                      <div class="progress-box">
                        <div class="percentage-cur">
                          <span class="num">{{ selectedRange2}}.00%</span>
                        </div>
                        <div class="progress-bar progress-bar-slider">
                          <input class="progress-slider" type="range" min="0" max="100" ng-model="selectedRange2">
                          <div class="inner" ng-style="{ width: (selectedRange2) + '%'  }" ></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!--第三水厂排放情况-->
            <div ng-show="tableStatus.allWater2">
              <div class="col-md-8 chart-panel">
                <div class="row">

                  <div class="col-md-3">
                    <highchart  config="chart21"></highchart>
                  </div>

                  <div class="col-md-3">
                    <highchart style="height:400px;" config="chart22"></highchart>
                  </div>

                  <div class="col-md-3">
                    <highchart style="height:400px;" config="chart23"></highchart>
                  </div>

                  <div class="col-md-3">
                    <highchart style="height:400px;" config="chart24"></highchart>
                  </div>
                  <div class="col-md-12">
                    <table class="table table-bordered">
                      <tr>
                        <th></th>
                        <th colspan="2">溶解氧(mg/L)</th>
                        <th colspan="2">高锰酸钾(mg/L)</th>
                        <th colspan="2">氨氮(mg/L)</th>
                        <th colspan="2">总磷(mg/L)</th>
                      </tr>
                      <tr>
                        <td></td>
                        <td>原值</td>
                        <td>预测未来值</td>
                        <td>原值</td>
                        <td>预测未来值</td>
                        <td>原值</td>
                        <td>预测未来值</td>
                        <td>原值</td>
                        <td>预测未来值</td>
                      </tr>
                      <tr>
                        <td>值</td>
                        <td>6</td>
                        <td>
                          {{(selectedRange4*0.03*0.5+1+selectedRange3*0.05).toFixed(2)}}
                        </td>
                        <td>16</td>
                        <td>{{(selectedRange3*0.03*0.5+11).toFixed(2)}}</td>
                        <td>1.5</td>
                        <td>
                          {{(selectedRange4*0.03*0.5+1.3+selectedRange3*0.05).toFixed(2)}}
                        </td>
                        <td>0.6</td>
                        <td>
                          {{(selectedRange4*0.03*0.5+0.3+selectedRange3*0.05).toFixed(2)}}
                        </td>
                      </tr>
                      <tr>
                        <td>状态</td>
                        <td>
                          <span ng-class="getLabelCss(getStatusDesc(waterQualityAnalysisMarker.index_o2,waterQualityO2Scan.scan,'溶解氧').status)">
                            {{getChineseStatusView(getStatusDesc(waterQualityAnalysisMarker.index_o2,waterQualityO2Scan.scan,'溶解氧').status)}}
                          </span>
                        </td>
                        <td>
                          <span ng-class="getLabelCss(getStatusDesc(predict_waterquality.index_o2,waterQualityO2Scan.scan,'溶解氧').status)">
                            {{getChineseStatusView(getStatusDesc(predict_waterquality.index_o2,waterQualityO2Scan.scan,'溶解氧').status)}}
                          </span>
                        </td>
                        <td>
                          <span ng-class="getLabelCss(getStatusAsc(waterQualityAnalysisMarker.index_kmno4,waterQualityKmno4Scan.scan,'高锰酸钾').status)">
                            {{getChineseStatusView(getStatusAsc(waterQualityAnalysisMarker.index_kmno4,waterQualityKmno4Scan.scan,'高锰酸钾').status)}}
                          </span>
                        </td>
                        <td>
                          <span ng-class="getLabelCss(getStatusAsc(predict_waterquality.index_kmno4,waterQualityKmno4Scan.scan,'高锰酸钾').status)">
                            {{getChineseStatusView(getStatusAsc(predict_waterquality.index_kmno4,waterQualityKmno4Scan.scan,'高锰酸钾').status)}}
                          </span>
                        </td>
                        <td>
                          <span ng-class="getLabelCss(getStatusAsc(waterQualityAnalysisMarker.index_nh4n,waterQualityNh4nScan.scan,'氨氮').status)">
                            {{getChineseStatusView(getStatusAsc(waterQualityAnalysisMarker.index_nh4n,waterQualityNh4nScan.scan,'氨氮').status)}}
                          </span>
                        </td>
                        <td>
                          <span ng-class="getLabelCss(getStatusAsc(predict_waterquality.index_nh4n,waterQualityNh4nScan.scan,'氨氮').status)">
                            {{getChineseStatusView(getStatusAsc(predict_waterquality.index_nh4n,waterQualityNh4nScan.scan,'氨氮').status)}}
                          </span>
                        </td>
                        <td>
                          <span ng-class="getLabelCss(getStatusAsc(waterQualityAnalysisMarker.index_p,waterQualityPScan.scan,'总磷').status)">
                            {{getChineseStatusView(getStatusAsc(waterQualityAnalysisMarker.index_p,waterQualityPScan.scan,'总磷').status)}}
                          </span>
                        </td>
                        <td>
                          <span ng-class="getLabelCss(getStatusAsc(predict_waterquality.index_p,waterQualityPScan.scan,'总磷').status)">
                            {{getChineseStatusView(getStatusAsc(predict_waterquality.index_p,waterQualityPScan.scan,'总磷').status)}}
                          </span>
                        </td>
                      </tr>
                    </table>
                  </div>
                </div>
              </div>
              <div class="col-md-4 desc-content">
                <div class="ioc-panel-desc">
                  <p class="ioc-panel-desc-title">
                    <img src="/images/common/data_details.png"/>
                  </p>
                </div>
                <div >
                  <h4>第三水厂主要受到港城组团污水处理厂和浏河镇污水处理厂的工业废水排放影响</h4>
                </div>
                <p class="fill-margin"></p>
                <div class="ioc-panel-desc">
                  <p class="ioc-panel-desc-title">
                    <img src="/images/common/ioc-index-mean.png"/>
                  </p>
                  <p class="ioc-panel-desc-body">
                    可手动调节 <strong>工业废水排放量</strong>
                    ，观察对应各个水质污染物污染情况。
                  </p>
                </div>

                <div class="row">
                  <div class="col-md-5">
                    <p class="handler-title" ng-model="fc.name1">港城组团污水处理厂</p>
                  </div>
                  <div class="col-md-7">
                    <div class="progress-box">
                      <div class="percentage-cur">
                        <span class="num">{{selectedRange4}}.00%</span>
                      </div>
                      <div class="progress-bar progress-bar-slider">
                        <input class="progress-slider" type="range" min="0" max="100" ng-model="selectedRange4" >
                        <div class="inner" ng-style="{ width: (selectedRange4) + '%'   }" ></div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-5">
                    <p class="handler-title">浏河镇污水处理厂</p>
                  </div>
                  <div class="col-md-7">
                    <div class="progress-box">
                      <div class="percentage-cur">
                        <span class="num">{{ selectedRange3}}.00%</span>
                      </div>
                      <div class="progress-bar progress-bar-slider">
                        <input class="progress-slider" type="range" min="0" max="100" ng-model="selectedRange3">
                        <div class="inner" ng-style="{ width: (selectedRange3) + '%'   }" ></div>
                      </div>
                    </div>
                  </div>
                </div>   
              </div>
            </div>

            <!--第二水厂数据-->
            <div ng-show="tableStatus.allWater3">
              <div class="col-md-8 chart-panel">
                <div class="row">

                  <div class="col-md-3">
                    <highchart  config="chart31"></highchart>
                  </div>

                  <div class="col-md-3">
                    <highchart style="height:400px;" config="chart32"></highchart>
                  </div>

                  <div class="col-md-3">
                    <highchart style="height:400px;" config="chart33"></highchart>
                  </div>

                  <div class="col-md-3">
                    <highchart style="height:400px;" config="chart34"></highchart>
                  </div>

                  <div class="col-md-12">
                    <table class="table table-bordered">
                      <tr>
                        <th></th>
                        <th colspan="2">溶解氧(mg/L)</th>
                        <th colspan="2">高锰酸钾(mg/L)</th>
                        <th colspan="2">氨氮(mg/L)</th>
                        <th colspan="2">总磷(mg/L)</th>
                      </tr>
                      <tr>
                        <td></td>
                        <td>原值</td>
                        <td>预测未来值</td>
                        <td>原值</td>
                        <td>预测未来值</td>
                        <td>原值</td>
                        <td>预测未来值</td>
                        <td>原值</td>
                        <td>预测未来值</td>
                      </tr>
                      <tr>
                        <td>值</td>
                        <td>2</td>
                        <td>{{(selectedRange5*0.03*0.5+3).toFixed(2)}}</td>
                        <td>{{waterQualityAnalysisMarker.index_kmno4}}</td>
                        <td>{{(selectedRange5*0.03*0.5+8).toFixed(2)}}</td>
                        <td>{{waterQualityAnalysisMarker.index_nh4n}}</td>
                        <td>{{(selectedRange5*0.03*0.5+0.8).toFixed(2)}}</td>
                        <td>{{waterQualityAnalysisMarker.index_p}}</td>
                        <td>{{(selectedRange5*0.03*0.5+0.3).toFixed(2)}}</td>
                      </tr>
                      <tr>
                        <td>状态</td>
                        <td>
                          <span ng-class="getLabelCss(getStatusDesc(waterQualityAnalysisMarker.index_o2,waterQualityO2Scan.scan,'溶解氧').status)">
                            {{getChineseStatusView(getStatusDesc(waterQualityAnalysisMarker.index_o2,waterQualityO2Scan.scan,'溶解氧').status)}}
                          </span>
                        </td>
                        <td>
                          <span ng-class="getLabelCss(getStatusDesc(predict_waterquality.index_o2,waterQualityO2Scan.scan,'溶解氧').status)">
                            {{getChineseStatusView(getStatusDesc(predict_waterquality.index_o2,waterQualityO2Scan.scan,'溶解氧').status)}}
                          </span>
                        </td>
                        <td>
                          <span ng-class="getLabelCss(getStatusAsc(waterQualityAnalysisMarker.index_kmno4,waterQualityKmno4Scan.scan,'高锰酸钾').status)">
                            {{getChineseStatusView(getStatusAsc(waterQualityAnalysisMarker.index_kmno4,waterQualityKmno4Scan.scan,'高锰酸钾').status)}}
                          </span>
                        </td>
                        <td>
                          <span ng-class="getLabelCss(getStatusAsc(predict_waterquality.index_kmno4,waterQualityKmno4Scan.scan,'高锰酸钾').status)">
                            {{getChineseStatusView(getStatusAsc(predict_waterquality.index_kmno4,waterQualityKmno4Scan.scan,'高锰酸钾').status)}}
                          </span>
                        </td>
                        <td>
                          <span ng-class="getLabelCss(getStatusAsc(waterQualityAnalysisMarker.index_nh4n,waterQualityNh4nScan.scan,'氨氮').status)">
                            {{getChineseStatusView(getStatusAsc(waterQualityAnalysisMarker.index_nh4n,waterQualityNh4nScan.scan,'氨氮').status)}}
                          </span>
                        </td>
                        <td>
                          <span ng-class="getLabelCss(getStatusAsc(predict_waterquality.index_nh4n,waterQualityNh4nScan.scan,'氨氮').status)">
                            {{getChineseStatusView(getStatusAsc(predict_waterquality.index_nh4n,waterQualityNh4nScan.scan,'氨氮').status)}}
                          </span>
                        </td>
                        <td>
                          <span ng-class="getLabelCss(getStatusAsc(waterQualityAnalysisMarker.index_p,waterQualityPScan.scan,'总磷').status)">
                            {{getChineseStatusView(getStatusAsc(waterQualityAnalysisMarker.index_p,waterQualityPScan.scan,'总磷').status)}}
                          </span>
                        </td>
                        <td>
                          <span ng-class="getLabelCss(getStatusAsc(predict_waterquality.index_p,waterQualityPScan.scan,'总磷').status)">
                            {{getChineseStatusView(getStatusAsc(predict_waterquality.index_p,waterQualityPScan.scan,'总磷').status)}}
                          </span>
                        </td>
                      </tr>
                    </table>
                  </div>
                </div>
              </div>
              <div class="col-md-4 desc-content">
                <div class="ioc-panel-desc">
                  <p class="ioc-panel-desc-title">
                    <img src="/images/common/data_details.png"/>
                  </p>
                </div>
                <div >
                  <h4>第二水厂位处璜泾镇污水处理厂下游，受其污水排放影响</h4>
                </div>
                <p class="fill-margin"></p>
                <div class="ioc-panel-desc">
                  <p class="ioc-panel-desc-title">
                    <img src="/images/common/ioc-index-mean.png"/>
                  </p>
                  <p class="ioc-panel-desc-body">
                    可手动调节
                    <strong>工厂废水排放量</strong>
                    观察对应各个水质污染物污染情况
                  </p>
                </div>
                <div class="row">
                  <div class="col-md-5">
                    <p class="handler-title" ng-model="fc.name1">璜泾镇污水处理厂</p>
                  </div>
                  <div class="col-md-7">
                    <div class="progress-box">
                      <div class="percentage-cur">
                        <span class="num">{{selectedRange5}}.00%</span>
                        <span></span>
                      </div>
                      <div class="progress-bar progress-bar-slider">
                        <input class="progress-slider" type="range" min="0" max="100" ng-model="selectedRange5" >
                        <div class="inner" ng-style="{ width: (selectedRange5) + '%'   }" ></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <p class="fill-margin"></p>
            <p class="fill-margin bordered"></p>
          </div>
        </div>
      </div>
    </div>
</div>

